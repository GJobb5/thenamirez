class NamirezSystem{constructor(){this.config={apiMembers:"names.json",apiGallery:"gallery.json",defaultImage:"images/default.png",debounceTime:300,loaderDelay:800},this.state={members:[],gallery:[],debounceTimer:null},this.dom={loader:document.getElementById("page-loader"),body:document.body,searchInput:document.getElementById("searchInput"),resultDiv:document.getElementById("results"),matchCount:document.getElementById("matchCount"),totalCount:document.getElementById("totalCount"),backToTopBtn:document.getElementById("backToTop"),galleryGrid:document.getElementById("gallery-grid"),imageViewer:document.getElementById("image-viewer"),fullImage:document.getElementById("full-image"),caption:document.getElementById("caption"),closeBtn:document.querySelector(".close-btn")},this.easterEgg=new EasterEggSystem}init(){console.clear(),console.log("%c NAMIREZ SYSTEM %c ONLINE ","background: #fff; color: #000; font-size: 16px; font-weight: bold; padding: 5px;","background: #000; color: #fff; font-size: 16px; font-weight: bold; padding: 5px;"),this.handleGlobalEvents(),this.initSnowEffect(),this.easterEgg.init(),this.dom.resultDiv?(this.loadMembers(),this.setupSearch()):this.dom.galleryGrid?(this.loadGallery(),this.setupLightbox()):this.hideLoader()}async loadMembers(){try{await new Promise(resolve=>setTimeout(resolve,600));const response=await fetch(this.config.apiMembers);if(!response.ok)throw new Error(`HTTP Error: ${response.status}`);const data=await response.json();this.state.members=data,this.updateStats(this.state.members.length,this.state.members.length),this.renderMembers(this.state.members)}catch(error){console.error("Member Error:",error),this.renderError(this.dom.resultDiv)}finally{this.hideLoader()}}renderMembers(list){if(!this.dom.resultDiv)return;if(this.dom.resultDiv.innerHTML="",0===list.length)return void(this.dom.resultDiv.innerHTML='\n        <div class="loading-wrapper">\n          <p style="color: #555; font-size: 1.5rem; letter-spacing: 3px;">NO TARGET FOUND</p>\n        </div>');const ul=document.createElement("ul"),fragment=document.createDocumentFragment();list.forEach((person,index)=>{const card=document.createElement("li");card.className="card",card.style.opacity="0",card.style.animation=`fadeInMove 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards ${.05*index}s`;const imagePath=person.image||this.config.defaultImage,rank=person.rank||"MEMBER";let socialHtml="";person.facebook&&(socialHtml+=`<a href="${person.facebook}" target="_blank" class="social-btn fb"><i class="fab fa-facebook-f"></i></a>`),person.instagram&&(socialHtml+=`<a href="${person.instagram}" target="_blank" class="social-btn ig"><i class="fab fa-instagram"></i></a>`),person.youtube&&(socialHtml+=`<a href="${person.youtube}" target="_blank" class="social-btn yt"><i class="fab fa-youtube"></i></a>`),person.tiktok&&(socialHtml+=`<a href="${person.tiktok}" target="_blank" class="social-btn tt"><i class="fab fa-tiktok"></i></a>`),card.innerHTML=`\n        <img src="${imagePath}" class="card-bg-img" loading="lazy">\n        <div class="card-overlay"></div>\n        <div class="info-layer">\n          <span class="rank-tag">${rank}</span>\n          <span class="name-text">${person.name}</span>\n          <div class="social-actions">${socialHtml}</div>\n        </div>\n      `;const img=card.querySelector("img");img.onerror=()=>{img.src=this.config.defaultImage},fragment.appendChild(card)}),ul.appendChild(fragment),this.dom.resultDiv.appendChild(ul)}updateStats(match,total){this.dom.matchCount&&(this.dom.matchCount.textContent=match),this.dom.totalCount&&(this.dom.totalCount.textContent=total)}setupSearch(){this.dom.searchInput&&this.dom.searchInput.addEventListener("input",e=>{clearTimeout(this.state.debounceTimer),this.state.debounceTimer=setTimeout(()=>{const query=e.target.value.trim().toLowerCase(),filtered=query?this.state.members.filter(m=>m.name.toLowerCase().includes(query)):this.state.members;this.renderMembers(filtered),this.updateStats(filtered.length,this.state.members.length)},this.config.debounceTime)})}async loadGallery(){try{await new Promise(resolve=>setTimeout(resolve,600));const response=await fetch(this.config.apiGallery);if(!response.ok)throw new Error(`HTTP Error: ${response.status}`);const data=await response.json();this.state.gallery=data,this.renderGallery(data)}catch(error){console.error("Gallery Error:",error),this.dom.galleryGrid.innerHTML='<p style="color: #fff; text-align: center;">GALLERY NOT FOUND</p>'}finally{this.hideLoader()}}renderGallery(list){if(!this.dom.galleryGrid)return;this.dom.galleryGrid.innerHTML="";const fragment=document.createDocumentFragment();list.forEach((item,index)=>{const div=document.createElement("div");div.className="gallery-item",div.style.opacity="0",div.style.animation=`fadeInMove 0.5s forwards ${.1*index}s`;const isVideo=!!item.video;let imageSrc=item.image;if(!imageSrc&&isVideo){const ytID=this.getYouTubeID(item.video);imageSrc=ytID?`https://img.youtube.com/vi/${ytID}/maxresdefault.jpg`:this.config.defaultImage}let htmlContent=`<img src="${imageSrc}" alt="${item.caption}" loading="lazy">`;isVideo&&(htmlContent+='<div class="play-icon"><i class="fa-solid fa-play"></i></div>',div.setAttribute("data-video",item.video)),htmlContent+=`\n        <div class="gallery-overlay">\n            <h3>${item.caption}</h3>\n        </div>\n      `,div.innerHTML=htmlContent,div.addEventListener("click",()=>{isVideo?window.open(item.video,"_blank"):this.openLightbox(imageSrc,item.caption)}),fragment.appendChild(div)}),this.dom.galleryGrid.appendChild(fragment)}getYouTubeID(url){if(!url)return null;const regExp=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,match=url.match(regExp);return match&&11===match[2].length?match[2]:null}setupLightbox(){this.dom.imageViewer&&(this.dom.closeBtn.onclick=()=>this.closeLightbox(),this.dom.imageViewer.onclick=e=>{e.target===this.dom.imageViewer&&this.closeLightbox()})}openLightbox(src,caption){this.dom.imageViewer.style.display="flex",setTimeout(()=>{this.dom.imageViewer.classList.add("active")},10),this.dom.fullImage.src=src,this.dom.caption.innerHTML=caption}closeLightbox(){this.dom.imageViewer.classList.remove("active"),setTimeout(()=>{this.dom.imageViewer.style.display="none"},300)}renderError(container){container&&(container.innerHTML='\n        <div class="loading-wrapper">\n          <i class="fa-solid fa-triangle-exclamation" style="color: var(--accent); font-size: 3rem; margin-bottom: 20px;"></i>\n          <p style="color: var(--accent); font-size: 1.5rem;">CONNECTION FAILED</p>\n        </div>')}handleGlobalEvents(){if(window.addEventListener("scroll",()=>{this.dom.backToTopBtn&&(window.scrollY>300?this.dom.backToTopBtn.classList.add("show"):this.dom.backToTopBtn.classList.remove("show"))}),!document.getElementById("dynamic-styles")){const styleSheet=document.createElement("style");styleSheet.id="dynamic-styles",styleSheet.innerText="\n        @keyframes fadeInMove {\n            from { opacity: 0; transform: translateY(30px); filter: blur(4px); }\n            to { opacity: 1; transform: translateY(0); filter: blur(0); }\n        }\n        ",document.head.appendChild(styleSheet)}}hideLoader(){this.dom.loader&&setTimeout(()=>{this.dom.loader.classList.add("hidden")},this.config.loaderDelay)}initSnowEffect(){if(document.querySelector(".snow-generated"))return;let snowContainer=document.querySelector(".snow-container");snowContainer?snowContainer.classList.add("snow-generated"):(snowContainer=document.createElement("div"),snowContainer.className="snow-container snow-generated",document.body.prepend(snowContainer));const createSnowflake=()=>{const snowflake=document.createElement("div");snowflake.classList.add("snowflake"),snowflake.innerText="‚ùÑ",snowflake.style.left=100*Math.random()+"vw",snowflake.style.fontSize=10*Math.random()+10+"px",snowflake.style.opacity=.5*Math.random()+.3;const duration=5*Math.random()+3;snowflake.style.animationDuration=duration+"s",this.dom.body.appendChild(snowflake),setTimeout(()=>{snowflake.remove()},1e3*duration)};setInterval(createSnowflake,400)}}class EasterEggSystem{constructor(){this.konamiCode=["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","b","a","Enter"],this.konamiIndex=0,this.easterEggActive=!1,this.eggLevel=0,this.sequences={konami:0,namirez:1,secret:2}}init(){this.setupKonamiCode(),this.setupNamirezCode(),this.setupSecretCode()}setupKonamiCode(){document.addEventListener("keydown",e=>{e.key===this.konamiCode[this.konamiIndex]?(this.konamiIndex++,this.konamiIndex===this.konamiCode.length&&(this.activateEasterEgg(this.sequences.konami),this.konamiIndex=0)):this.konamiIndex=0})}setupNamirezCode(){const namirezCode=["n","a","m","i","r","e","z","1","3","3","7"];let namirezIndex=0;document.addEventListener("keydown",e=>{e.key.toLowerCase()===namirezCode[namirezIndex]?(namirezIndex++,namirezIndex===namirezCode.length&&(this.activateEasterEgg(this.sequences.namirez),namirezIndex=0)):namirezIndex=0})}setupSecretCode(){const secretPattern=["header","footer","card","card","card","header","stat-item","stat-item"];let patternIndex=0,lastClickTime=0;document.addEventListener("click",e=>{const currentTime=Date.now();if(currentTime-lastClickTime<200)return;let clickedType=null;e.target.closest(".header")?clickedType="header":e.target.closest(".footer-credit")?clickedType="footer":e.target.closest(".card")?clickedType="card":e.target.closest(".stat-item")&&(clickedType="stat-item"),clickedType&&(currentTime-lastClickTime>3e3&&(patternIndex=0),clickedType===secretPattern[patternIndex]?(patternIndex++,patternIndex===secretPattern.length&&(this.activateEasterEgg(this.sequences.secret),patternIndex=0)):patternIndex=clickedType===secretPattern[0]?1:0,lastClickTime=currentTime)})}activateEasterEgg(level){if(!this.easterEggActive){switch(this.easterEggActive=!0,this.eggLevel=level,this.muteAllSounds(),this.showEggMessage(level),level){case 0:this.konamiEffects();break;case 1:this.namirezEffects();break;case 2:this.secretEffects()}this.saveEggAchievement(level),setTimeout(()=>this.deactivateEasterEgg(),3e4)}}konamiEffects(){document.body.classList.add("rainbow-mode"),this.play8BitMusic(),this.spawnSecretCharacter("konami"),console.log("%cüéÆ KONAMI CODE ACTIVATED!","color: #FF00FF; font-size: 20px; font-weight: bold;"),console.log("%cüëë You found the classic secret!","color: #00FF00; font-size: 16px;")}namirezEffects(){document.body.classList.add("golden-mode"),this.showHiddenMembers(),this.unlockSecretGallery(),console.log("%cüîê NAMIREZ SECRET UNLOCKED!","color: gold; font-size: 24px; text-shadow: 0 0 10px #FFD700;"),console.log("%cüíé Welcome to the inner circle.","color: #FFF; background: #000; padding: 5px;")}secretEffects(){this.transformToGame(),this.nestedEasterEgg(),setTimeout(()=>this.ultimateSurprise(),5e3)}saveEggAchievement(level){const achievements=JSON.parse(localStorage.getItem("namirez_achievements")||"{}"),now=(new Date).toISOString();achievements[`egg_${level}`]={unlocked:now,level:level,name:["Konami Master","Namirez Insider","Ultimate Detective"][level]},localStorage.setItem("namirez_achievements",JSON.stringify(achievements)),this.showAchievementBadge(level)}transformToGame(){console.log("GAME START!");const container=document.querySelector(".container");container&&(this.originalContent=container.innerHTML,container.innerHTML='\n          <div id="game-area" style="position: relative; height: 600px; border: 2px solid #fff; background: rgba(0,0,0,0.8); overflow: hidden; cursor: none;">\n            \n            <div style="position: absolute; top: 20px; left: 20px; color: #fff; font-size: 2rem; z-index: 10;">\n              SCORE: <span id="score" style="color: gold;">0</span>\n            </div>\n            \n            <div style="position: absolute; top: 20px; right: 20px; color: #fff; font-size: 2rem; z-index: 10;">\n              TIME: <span id="time" style="color: red;">30</span>\n            </div>\n\n            <div class="player" style="position: absolute; font-size: 3rem; user-select: none;">üöÄ</div>\n            <div class="collectible" style="position: absolute; font-size: 2.5rem; user-select: none;">‚≠ê</div>\n            <div class="enemy" style="position: absolute; font-size: 3rem; user-select: none;">üëæ</div>\n\n            <div style="position: absolute; bottom: 20px; width: 100%; text-align: center; color: #aaa; font-size: 1.2rem;">\n              USE [ARROW KEYS] TO MOVE\n            </div>\n          </div>\n        '),this.startMiniGame()}showAchievementBadge(level){const badge=document.createElement("div");badge.className="achievement-badge",badge.innerHTML=`\n      <div class="badge-content">\n        <i class="fas fa-trophy"></i>\n        <span>${["BRONZE","SILVER","GOLD"][level]} EGG UNLOCKED!</span>\n      </div>\n    `,document.body.appendChild(badge),setTimeout(()=>badge.remove(),5e3)}play8BitMusic(){const audioContext=new(window.AudioContext||window.webkitAudioContext),melody=[{note:523.25,duration:.2},{note:587.33,duration:.2},{note:659.25,duration:.2},{note:698.46,duration:.2},{note:783.99,duration:.2},{note:880,duration:.2},{note:987.77,duration:.2},{note:1046.5,duration:.5}];melody.forEach((tone,index)=>{setTimeout(()=>{const oscillator=audioContext.createOscillator(),gainNode=audioContext.createGain();oscillator.connect(gainNode),gainNode.connect(audioContext.destination),oscillator.frequency.value=tone.note,oscillator.type="square",gainNode.gain.setValueAtTime(.1,audioContext.currentTime),gainNode.gain.exponentialRampToValueAtTime(.01,audioContext.currentTime+tone.duration),oscillator.start(),oscillator.stop(audioContext.currentTime+tone.duration)},250*index)})}showEggMessage(level){const messages=["üéÆ KONAMI CODE ACTIVATED!","üîê NAMIREZ SECRET UNLOCKED!","üî• ULTIMATE SECRET DISCOVERED!"],colors=["#FF00FF","gold","#00FF00"],messageDiv=document.createElement("div");messageDiv.className="egg-message",messageDiv.style.borderColor=colors[level],messageDiv.innerHTML=`\n      <h1 style="color: ${colors[level]}; margin-bottom: 10px;">${messages[level]}</h1>\n      <p style="color: #fff; font-size: 1.2rem;">\n        ${["Classic gaming secret unlocked!","Welcome to the inner circle!","You found the ultimate secret!"][level]}\n      </p>\n      <p style="color: #888; margin-top: 20px; font-size: 0.8rem;">\n        Egg will expire in 30 seconds...\n      </p>\n    `,document.body.appendChild(messageDiv),setTimeout(()=>{messageDiv.remove()},3e3)}muteAllSounds(){const allAudio=document.querySelectorAll("audio, video");allAudio.forEach(audio=>{audio.muted=!0,audio.pause()})}spawnSecretCharacter(type){const characters={konami:"üïπÔ∏è",namirez:"üëë",secret:"üé≠"},charDiv=document.createElement("div");charDiv.className="secret-character",charDiv.innerHTML=characters[type]||"‚ùì",charDiv.style.right=`${80*Math.random()+10}px`,document.body.appendChild(charDiv),setTimeout(()=>{charDiv.remove()},15e3)}showHiddenMembers(){console.log("%cüìú HIDDEN MEMBERS REVEALED!","color: #FFD700; font-size: 16px;");const hiddenMembers=[{name:"Namirez Founder",rank:"LEGEND"},{name:"Ghost Member",rank:"MYTH"},{name:"Future Recruit",rank:"PROPHECY"}];hiddenMembers.forEach(member=>{console.log(`%c${member.name} - ${member.rank}`,"color: #FFF; background: #333; padding: 2px 5px;")})}unlockSecretGallery(){console.log("%cüñºÔ∏è SECRET GALLERY UNLOCKED!","color: #00FFFF; font-size: 16px;")}nestedEasterEgg(){console.log("%cü•ö EASTER EGG WITHIN AN EASTER EGG!","color: #FF00FF; font-size: 18px; font-weight: bold;"),console.log("%cüîç Look closely... there might be more secrets!","color: #FFFF00;");const secrets=["The code is 7355608","Check the page source for hints","Try clicking the logo 10 times","Press Alt+F4 for special mode (just kidding)"],randomSecret=secrets[Math.floor(Math.random()*secrets.length)];console.log(`%cüí° Hint: ${randomSecret}`,"color: #00FF00; background: #000; padding: 5px;")}ultimateSurprise(){const surpriseDiv=document.createElement("div");surpriseDiv.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: black;\n      z-index: 999999;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      font-family: 'Teko', sans-serif;\n      text-align: center;\n    ",surpriseDiv.innerHTML=`\n      <h1 style="color: gold; font-size: 4rem; margin-bottom: 20px;">\n        üèÜ CONGRATULATIONS! üèÜ\n      </h1>\n      <p style="color: white; font-size: 2rem; margin-bottom: 40px;">\n        You've discovered the ultimate secret!\n      </p>\n      <p style="color: #888; font-size: 1.2rem;">\n        You are now an honorary member of Namirez Family!\n      </p>\n      <div style="margin-top: 30px; font-size: 5rem;">\n        ${["üéñÔ∏è","üèÖ","üé™","üéØ"][Math.floor(4*Math.random())]}\n      </div>\n      <p style="color: #666; margin-top: 50px; font-size: 0.8rem;">\n        This message will disappear in 5 seconds...\n      </p>\n    `,document.body.appendChild(surpriseDiv),setTimeout(()=>{surpriseDiv.remove()},5e3)}checkCollisions(){const player=document.querySelector(".player"),collectible=document.querySelector(".collectible");if(player&&collectible){const playerRect=player.getBoundingClientRect(),collectRect=collectible.getBoundingClientRect();if(playerRect.left<collectRect.right&&playerRect.right>collectRect.left&&playerRect.top<collectRect.bottom&&playerRect.bottom>collectRect.top){collectible.style.display="none";const scoreElement=document.getElementById("score");let score=parseInt(scoreElement.textContent)+100;scoreElement.textContent=score,setTimeout(()=>{collectible&&(collectible.style.display="block",collectible.style.left=`${80*Math.random()+10}%`,collectible.style.top=`${80*Math.random()+10}%`)},500)}}}endMiniGame(score){const container=document.querySelector(".container"),endScreen=document.createElement("div");endScreen.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0,0,0,0.9);\n      z-index: 999999;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      color: white;\n      text-align: center;\n      font-family: 'Teko', sans-serif;\n    ",endScreen.innerHTML=`\n      <h1 style="font-size: 3rem; color: gold; margin-bottom: 20px;">\n        GAME OVER!\n      </h1>\n      <p style="font-size: 2rem; margin-bottom: 10px;">\n        Your Score: <span style="color: #00FF00">${score}</span>\n      </p>\n      <p style="font-size: 1.5rem; margin-bottom: 30px;">\n        ${score>500?"üèÜ EXCELLENT!":score>300?"üëç GOOD JOB!":"üòÖ NICE TRY!"}\n      </p>\n      <button id="returnToSite" style="\n        background: #000;\n        color: white;\n        border: 2px solid white;\n        padding: 10px 30px;\n        font-size: 1.2rem;\n        cursor: pointer;\n        margin-top: 20px;\n      ">\n        RETURN TO SITE\n      </button>\n    `,document.body.appendChild(endScreen),document.getElementById("returnToSite").addEventListener("click",()=>{endScreen.remove(),this.deactivateEasterEgg()})}deactivateEasterEgg(){this.easterEggActive=!1,document.body.classList.remove("rainbow-mode","golden-mode"),this.originalContent&&document.querySelector(".container")&&(document.querySelector(".container").innerHTML=this.originalContent),console.log("%cüîö Easter Egg deactivated.","color: #888; font-style: italic;")}startMiniGame(){const player=document.querySelector(".player"),collectible=document.querySelector(".collectible"),enemy=document.querySelector(".enemy");if(!player)return;player.style.position="absolute",player.style.left="50%",player.style.top="50%",player.style.fontSize="2rem",player.style.transition="all 0.1s",collectible&&(collectible.style.position="absolute",collectible.style.left="20%",collectible.style.top="20%",collectible.style.fontSize="1.5rem"),enemy&&(enemy.style.position="absolute",enemy.style.left="80%",enemy.style.top="80%",enemy.style.fontSize="2rem");let score=0,time=30,playerX=50,playerY=50;const updateScore=()=>{const scoreElement=document.getElementById("score");scoreElement&&(scoreElement.textContent=0)},updateTime=()=>{const timeElement=document.getElementById("time");timeElement&&(timeElement.textContent=time)};document.addEventListener("keydown",e=>{switch(e.key){case"ArrowUp":playerY=Math.max(0,playerY-5);break;case"ArrowDown":playerY=Math.min(95,playerY+5);break;case"ArrowLeft":playerX=Math.max(0,playerX-5);break;case"ArrowRight":playerX=Math.min(95,playerX+5)}player.style.left=`${playerX}%`,player.style.top=`${playerY}%`,this.checkCollisions()});const timer=setInterval(()=>{time--,updateTime(),time<=0&&(clearInterval(timer),this.endMiniGame(0))},1e3);updateScore(),updateTime()}}document.addEventListener("DOMContentLoaded",()=>{const app=new NamirezSystem;app.init()});